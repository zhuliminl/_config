{
  "title": "中介模式",
  "cells": [
    {
      "type": "code",
      "language": "javascript",
      "data": "let mediator = (function() {\n        let colorSelect = document.getElementById('colorSelect'),\n            numberInput = document.getElementById('numberInput'),\n            memorySelect = document.getElementById('memorySelect'),\n            colorInfo = document.getElementById('colorInfo'),\n            numberInfo = document.getElementById('numberInfo'),\n            memoryInfo = document.getElementById('memoryInfo'),\n            nextBtn = document.getElementById('nextBtn');\n\n       \treturn {\n       \t\tchanged: function(obj) {\n       \t\t\tlet color = colorSelect.value,\n       \t\t\t\tmemory = memorySelect.value,\n       \t\t\t\tnumber = numberInput.value,\n       \t\t\t\tstock = goods[color + '|' + memory];\n\n       \t\t\t// 确定传入的是哪个对象\n   \t\t\t\tif(obj === colorSelect) {\n   \t\t\t\t\tcolorInfo.innerHTML = color;\n   \t\t\t\t} else if(obj === memorySelect) {\n   \t\t\t\t\tmemoryInfo.innerHTML = memory;\n   \t\t\t\t} else if(obj === numberInput) {\n   \t\t\t\t\tnumberInfo.innerHTML = number;\n   \t\t\t\t}\n\n   \t\t\t\tif(!color || color === 'blank') {\n   \t\t\t\t\tnextBtn.disabled = true;\n   \t\t\t\t\tnextBtn.innerHTML = '请选择颜色哈';\n   \t\t\t\t\tcolorInfo.innerHTML = '未选择内存';\n   \t\t\t\t\treturn;\t\t\t\t\t\n   \t\t\t\t}\n   \t\t\t\tif(!memory || memory === 'blank') {\n   \t\t\t\t\tnextBtn.disabled = true;\n   \t\t\t\t\tnextBtn.innerHTML = '请选择内存哈';\n   \t\t\t\t\tmemoryInfo.innerHTML = '未选择内存'\n   \t\t\t\t\treturn;\n   \t\t\t\t}\n   \t\t\t\tif(!number) {\n   \t\t\t\t\tnextBtn.disabled = true;\n   \t\t\t\t\tnextBtn.innerHTML = '请输入购买数量';\n   \t\t\t\t\tnumberInfo.innerHTML = '请输入购买数量';\n   \t\t\t\t\treturn;\n   \t\t\t\t}\n   \t\t\t\tif(!(Number.isInteger(number - 0) && number > 0)) {\n   \t\t\t\t\tnextBtn.disabled = true;\n   \t\t\t\t\tnextBtn.innerHTML = '请输入正确的数量哈';\n   \t\t\t\t\treturn;\n   \t\t\t\t}\n   \t\t\t\tif(stock < number) {\n   \t\t\t\t\tnextBtn.disabled = true;\n   \t\t\t\t\tnextBtn.innerHTML = '库存不足呢';\n   \t\t\t\t\treturn;\n   \t\t\t\t}\n\n   \t\t\t\tnextBtn.disabled = false;\n   \t\t\t\tnextBtn.innerHTML = '加入购物车';\n       \t\t}\n       \t}\n    })();\n\n    colorSelect.onchange = function() {\n    \tmediator.changed(this);\n    };\n    memorySelect.onchange = function() {\n    \tmediator.changed(this);\n    };\n    numberInput.oninput  = function() {\n    \tmediator.changed(this);\n    }"
    }
  ]
}